<div class="text-center text-white"><br> 
    <h1 class="display-2 ">Upload a File</h1> <br>
    <form enctype="multipart/form-data" asp-controller="Home" asp-action="Index" method="post">
        <input type="file" name="file" id="file"><br> <br>
        <input class="btn btn-primary text-bold" type="submit" value="Upload" onclick="Update()"> <br> <br>
    </form>
    <div class="progress">
    <div class="progress-bar bg-success" id="progressbar" role="progressbar" style="width: 0%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div> <br> <br>
    </div>
    @if(ViewBag.Message != null)
    {
        <div class="alert alert-success" style="margin-top:20px">
            @ViewBag.Message
        </div>
    } <br>
    <h1 class="display-2">Files in Server</h1> <br>
    <div>
        @for (int i = 0; i < ViewBag.TotalFiles.Count; i++)
        {
            if(ViewBag.FileTypes[i] == "IMG"){
                <a href="@ViewBag.TotalFiles[i]"><img src="@ViewBag.TotalFiles[i]" alt="" width="200"></a> <br> <br>
            }
            else{
                <a class="btn btn-primary text-bold" href="@ViewBag.TotalFiles[i]">@ViewBag.TotalFiles[i]</a> <br> <br>
            }

        }
    </div>
    
</div>

<script>
    var progress = @ViewBag.Progress
    document.getElementById("progressbar").setAttribute("style", "width: " + progress +"%")
    function Update(){
        document.getElementById("progressbar").setAttribute("style", "width: " + progress +"%")
        if(@ViewBag.Progress != 100){
            progress = @ViewBag.progress
            document.getElementById("progressbar").setAttribute("style", "width: " + progress +"%")
            console.log(progress)
            Update();
            }
        }
</script>